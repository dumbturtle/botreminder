### Простейший телеграмм бот-напоминалка

## Оглавление.
1. Описание 
2. Установка и настройка
3. Использование

## **Описание**
Телеграмм бот, который присылает сообщение в назначенное время. 
Возможности минимальны:
1. Добавление напоминания.
2. Вывод списка напоминаний.
3. Удаление напоминания.
4. Отправка напоминаний пользователю.

Бот разделен на две части.
1. bot.py отвечает за создание, удаление, вывод список напоминаний в приложение  Телеграмм.
2. reminds_handlers.py за отправку пользователю в мессенджер Телеграмм. 


## **Установка и настройка**
Для правильной работы необходимо:
1. Python 3.7
2.  OS Ubuntu

Настройка:
1. Внести изменения в файл конфигурации. connect_settings.py

API_KEY = '' - ключ к боту, полученный от @botfather
DATABASE = "sqlite:///*.db" - путь к вашей базе данных SQLite


Установка:
1. Устанавливаем Python 3.7
2. Подготавливаем папку для установки
3. Устанавливаем зависимости в систему: sudo apt-get install python3-dev gcc
4. Копируем код с GitHub: https://github.com/dumbturtle/botreminder
5. Устанавливаем необходимые пакеты: pip install -r requirements.txt 
6. Настроить файл connect_settings.py
7. Создаем базу данных python database/create_db.py 
8. Для старта системы необходимо запустить скрипт: $bash ws.sh


## **Логи**
1. Логи пишуться в папку logs
    - bot.log - Лог работы Бота
    - remind.log - Лог работы обработчика



## **Алгоритм работы**
Чат-бот в роли напоминалки. Вводим дату и время, сообщение и бот в назначенное время нам вышлет сообщение.

Бот:
- Для начала работы надо отправить команду /start.

- При получении команды придет приветствие и предложение или добавить напоминание, или начать пользоваться, добавить пользователя в базу.
В момент получения команды бот проверяет наличие userid в базе и от этого выстраивает логику.
- Для добавления напоминания, надо нажать кнопку "Добавить напоминание"
- Бот предложить выбрать дату. Которая формируется "сегодня", плюс один день или ввод даты вручную.
- Далее бот предложит ввести час срабатывания. Если выбрана текущий день, будет предложены только оставшиеся часы.
- После выбора часа, будет предложено выбрать минуты. Шаг выбора 5 минут.
- Проверяется дата, на корректность ввода, если все верно и дата не в прошлом, будет предложено ввести Комментарий.
- После ввода комментария, если напоминание удачно запишется в базу, придет сообщение с описанием напоминания и его статус.

Обработчик:
- Каждую минуту в :01 проверяется база на наличие напоминаний и статус этого напоминания.
- При наличии в базе напоминания и статуса: Active, обработчик отправляет сообщение пользователю и переводить сообщение в статус deactive.

## **Видео работы**
https://youtu.be/7UPBnQs_jaw
P.S. Простите за звук:(

 
